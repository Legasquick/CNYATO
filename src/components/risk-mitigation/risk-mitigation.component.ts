import { ChangeDetectionStrategy, Component, signal } from '@angular/core';

interface MitigationPoint {
  heading: string;
  description: string;
}

interface MitigationMeasure {
  title: string;
  risks: string;
  icon: string;
  points: MitigationPoint[];
}

@Component({
  selector: 'app-risk-mitigation',
  templateUrl: './risk-mitigation.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class RiskMitigationComponent {
  expandedElement = signal<string | null>('Общие риски');

  mitigationMeasures: MitigationMeasure[] = [
    {
      title: 'Общие риски',
      risks: 'Кадровые, финансовые, маркетинговые, технологические, юридические',
      icon: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
      points: [
        { heading: 'Система мотивации', description: 'Разработка KPI и бонусной системы для удержания ключевых сотрудников.' },
        { heading: 'Предоплатная модель', description: 'Работа по предоплате для минимизации кассовых разрывов.' },
        { heading: 'Отстройка от конкурентов', description: 'Упор на УТП (подписочная модель, проактивность) для борьбы с демпингом.' },
        { heading: 'Резервное копирование', description: 'Регулярные бэкапы всех проектов и данных для защиты от сбоев оборудования.' },
        { heading: 'Лицензионная чистота', description: 'Использование только лицензионного ПО и контента для избежания юридических проблем.' }
      ]
    },
    {
      title: 'Политические риски',
      risks: 'Санкции, блокировки, экономическая нестабильность',
      icon: 'M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h10a2 2 0 002-2v-1a2 2 0 012-2h1.945a.5.5 0 00.434-.862l-9.14-15.07a.5.5 0 00-.868 0L2.62 10.138a.5.5 0 00.434.862z',
      points: [
        { heading: 'Диверсификация ПО', description: 'Постепенное тестирование и внедрение российских или open-source аналогов для некритичных задач. Создание "тревожного чемоданчика" с инструкциями по быстрой миграции.' },
        { heading: 'Финансовая устойчивость', description: 'Формирование резервного фонда для выживания в период экономической турбулентности, когда клиенты могут замораживать бюджеты.' }
      ]
    },
    {
      title: 'Экологические и строительные',
      risks: 'Погодные условия, проблемы с арендой',
      icon: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h6m-6 4h6m-6 4h6',
      points: [
        { heading: 'Гибкое планирование', description: 'Для съемок на натуре всегда иметь запасные даты или план "Б" со съемкой в интерьере.' },
        { heading: 'Надежный договор аренды', description: 'Заключать долгосрочный договор аренды с четко прописанными условиями его расторжения, выбирать офисы в современных бизнес-центрах с хорошей репутацией.' }
      ]
    },
    {
      title: 'Специфические риски',
      risks: 'Творческое выгорание',
      icon: 'M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7.014A8.003 8.003 0 0122 12c0 3-1 7-6.343 6.657z',
      points: [
        { heading: '"Перекрестное опыление"', description: 'Регулярно ротировать специалистов между проектами, чтобы избежать монотонности. Проводить общие брейнштормы.' },
        { heading: 'Внешние стимулы', description: 'Выделять бюджет на посещение командой кинофестивалей, выставок, мастер-классов для получения новых идей и "насмотренности".' },
        { heading: 'Проактивное продюсирование', description: 'Продюсер должен не просто выполнять ТЗ клиента, а постоянно предлагать новые форматы и идеи, чтобы контент не становился однообразным.' }
      ]
    },
    {
      title: 'Риски форс-мажора',
      risks: 'Пандемия, ЧП, стихийные бедствия',
      icon: 'M13 10V3L4 14h7v7l9-11h-7z',
      points: [
        { heading: 'Комплексное страхование', description: 'Оформить страхование имущества (оборудования), а также страхование от перерыва в хозяйственной деятельности.' },
        { heading: 'План непрерывности бизнеса (BCP)', description: 'Иметь четкий, задокументированный план действий на случай ЧП, включая протоколы удаленной работы и восстановления данных.' },
        { heading: 'Юридическая защита', description: 'Включать во все договоры с клиентами и подрядчиками подробный раздел о форс-мажоре.' }
      ]
    }
  ];

  toggleElement(title: string): void {
    if (this.expandedElement() === title) {
      this.expandedElement.set(null);
    } else {
      this.expandedElement.set(title);
    }
  }
}