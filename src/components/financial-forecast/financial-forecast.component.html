<section id="financial-forecast" class="container mx-auto px-6 py-12">
  <div class="text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600 font-heading">Финансовая модель и сценарии</h2>
    <p class="mt-4 text-lg text-gray-400">Прогноз финансовых результатов на 5 лет в трех ключевых сценариях.</p>
  </div>
  
  <div class="max-w-6xl mx-auto">
    <!-- Scenario Toggles -->
    <div class="flex justify-center mb-8 bg-gray-800/50 p-2 rounded-xl border border-gray-700">
      <button 
        (click)="selectScenario('Realistic')"
        [class]="selectedScenario() === 'Realistic' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-400 hover:bg-gray-700/50'"
        class="flex-1 px-4 py-2 text-center font-semibold rounded-lg transition-all duration-300">
        Реалистичный
      </button>
      <button 
        (click)="selectScenario('Optimistic')"
        [class]="selectedScenario() === 'Optimistic' ? 'bg-teal-600 text-white shadow-md' : 'text-gray-400 hover:bg-gray-700/50'"
        class="flex-1 px-4 py-2 text-center font-semibold rounded-lg transition-all duration-300">
        Оптимистичный
      </button>
      <button 
        (click)="selectScenario('Pessimistic')"
        [class]="selectedScenario() === 'Pessimistic' ? 'bg-amber-600 text-white shadow-md' : 'text-gray-400 hover:bg-gray-700/50'"
        class="flex-1 px-4 py-2 text-center font-semibold rounded-lg transition-all duration-300">
        Пессимистичный
      </button>
    </div>

    <!-- Scenario Assumptions -->
    <div class="mb-10 p-6 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl">
      <h3 class="text-xl font-bold font-heading mb-3"
        [class.text-blue-300]="selectedScenario() === 'Realistic'"
        [class.text-teal-300]="selectedScenario() === 'Optimistic'"
        [class.text-amber-300]="selectedScenario() === 'Pessimistic'">
        {{ currentScenario().name }}: Ключевые допущения
      </h3>
      <ul class="space-y-2 text-gray-300">
        @for(assumption of currentScenario().assumptions; track assumption) {
          <li class="flex items-start">
            <svg class="w-4 h-4 text-gray-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/></svg>
            <span>{{ assumption }}</span>
          </li>
        }
      </ul>
    </div>

    <h3 class="text-2xl text-center font-bold text-white mb-6 font-heading">Таблица 1: Отчет о прогнозируемых финансовых результатах</h3>
    <div class="bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl overflow-hidden shadow-2xl shadow-blue-900/40">
      <div class="overflow-x-auto">
        <table class="w-full min-w-[900px] text-sm text-left text-gray-300">
          <thead class="text-xs text-white uppercase bg-gray-800/60 font-heading">
            <tr>
              <th scope="col" class="px-6 py-3 w-[30%]">Показатель, ₽</th>
              <th scope="col" class="px-6 py-3 text-right">Год 1</th>
              <th scope="col" class="px-6 py-3 text-right">Год 2</th>
              <th scope="col" class="px-6 py-3 text-right">Год 3</th>
              <th scope="col" class="px-6 py-3 text-right">Год 4</th>
              <th scope="col" class="px-6 py-3 text-right">Год 5</th>
            </tr>
          </thead>
          <tbody>
            @for(row of currentScenario().data; track row.indicator) {
              <tr 
                class="border-b border-gray-700 hover:bg-gray-800/40 last:border-b-0"
                [class.font-bold]="row.isBold || row.isTotal"
                [class.text-white]="row.isBold"
                [class.bg-gray-800]="row.isTotal"
                [class.font-heading]="row.isTotal">
                <td class="px-6 py-4 whitespace-nowrap">{{ row.indicator }}</td>
                @for(value of row.values; track $index) {
                  <td class="px-6 py-4 text-right font-mono" [class.text-blue-300]="row.isTotal" [class.text-base]="row.isTotal">{{ value }}</td>
                }
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
